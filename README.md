# Создание информеров в каркасе сайта

Данная документация описывает возможности создания информеров на этапе разбора каркаса шаблона сайта. Для работы этого функционала не требуется установка дополнительных настроек в панели управления. Работа функционала осуществляется только в Новой Панели Управления. 

## Общеие сведения
Для создания информера в каркасе сайта необходимо использовать тэги
```html
<!--<new_informer>--> <!--</new_informer>-->
```
Внутри тэгов размещается конфигурация желаемого информера. Сами поля и их значения могут отличатся в зависимости от модуля(блог, новости, и т.д.) и типа контента(материалы, категории). Описание параметров и значений отдельно описано в разделах модулей. Формат данных внутри тегов - json. 

## Механизм работы
При создании шаблонов происходит анализ каркаса. В случае если встречен тег начала и конца информера всё содержимое внутри тегов подвергается конвертации из формат JSON в формат внутреннего представления информера и создаётся запись в списке информеров. При этом происходит сверка наборов параметров с уже существующими информерами. Новый информер будет создан только в случае если такой конфигурации нет ни у одного созданного информера. Код создания информера будет заменён на код вывода нового или существующего информера. Таким образом во время разбора каркаса будут созданы лишь уникальные информеры. В случае если во время разбора JSON стурктуры возникнут ошибки, код создания информера будет заменён на текст ошибки. Валидации параметров на этапе создания информера не происходит.

## Пример
```
<!--<new_informer>-->{
  "title":"Новый инфораер",
  "module":"bl",
  "sort":"",
  "max_entries":"",
  "max_columns":"",
  "categories_list":"",
  "entries_list":"",
  "title_max_length":"",
  "data_type":"1",
  "curdate":"",
  "template":"",
  "no_entries_msg":""
}<!--</new_informer>-->
```

## Параметры информеров по модулям
 - [Новости](doc/News.md)
 - [Блог](doc/Blog.md)
 - [Каталог статей](doc/Publ.md)
 - [Фотоальбом](doc/Photo.md)
 - [Каталог файлов](doc/Load.md)
 - [Каталог сайтов](doc/Dir.md)
 - [Доска объявлений](doc/Board.md)
 - [Каталог игр](doc/Stuff.md)
 - [Магазин](doc/Shop.md)
 - [Видео](doc/Video.md)
 - [Форум](doc/Forum.md)
 - [Пользователи](doc/Users.md)
 - [Комментарии](doc/Comments.md)
 - [Теги](doc/Tags.md)
 - [Счётчики](doc/Counters.md)

# Инструкция по созданию архива для загрузки в umarket
1. Устанавливаем шаблон №000 <a href="https://prnt.sc/ikwdfr" target="_blank">https://prnt.sc/ikwdfr</a>  
2. Создаем новый каркас сайта <a href="https://prnt.sc/ikwizv" target="_blank">https://prnt.sc/ikwizv</a>
3. Добавляем каркас сайта в набор дизайнов <a href="https://prnt.sc/ikwhk1" target="_blank">https://prnt.sc/ikwhk1</a>
4. В разделе маркета "Резервные копии шаблонов" создаем новый бэкап <a href="https://prnt.sc/ikxfij" target="_blank">https://prnt.sc/ikxfij</a> Скачиваем его себе на компьютер.
5. Все файлы, которые должны быть распакованы на сервере, архивируем в архив "resource.zip" <a href="https://prnt.sc/ikwn2j" target="_blank">https://prnt.sc/ikwn2j</a> и добавляем в архив шаблона. В результате у нас должна получиться такая структура архива <a href="https://prnt.sc/ikxe8q" target="_blank">https://prnt.sc/ikxe8q</a>
6. Указываем product_id в файле config.json <a href="http://i.prntscr.com/kJ68ewusTsm1kDGdaAZILg.png" target="_blank">http://i.prntscr.com/kJ68ewusTsm1kDGdaAZILg.png</a>
7. Проверяем правильность заполнение ключей в файле config.json

## Структура файла config.json
```
{
  "product_id": ""
  "template_framework": "",
  "informers": []
}
```